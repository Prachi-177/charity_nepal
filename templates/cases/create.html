{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block title %}Create Campaign - CharityNepal{% endblock %}

{% block extra_css %}
<style>
    /* Enhanced form field styling */
    .form-field {
        position: relative;
        margin-bottom: 1.5rem;
    }
    
    /* Override Django/Crispy Forms default input styles */
    input[type="text"], input[type="email"], input[type="tel"], input[type="number"], 
    input[type="datetime-local"], select, textarea, input[type="file"] {
        width: 100% !important;
        padding: 1rem 1.25rem !important;
        border: 2px solid #e5e7eb !important;
        border-radius: 1rem !important;
        background: rgba(255, 255, 255, 0.9) !important;
        backdrop-filter: blur(8px) !important;
        font-size: 0.95rem !important;
        font-weight: 500 !important;
        color: #374151 !important;
        transition: all 0.3s ease !important;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.02) !important;
    }
    
    /* Focus states for form fields */
    input[type="text"]:focus, input[type="email"]:focus, input[type="tel"]:focus, 
    input[type="number"]:focus, input[type="datetime-local"]:focus, select:focus, textarea:focus {
        border-color: #10b981 !important;
        background: rgba(255, 255, 255, 1) !important;
        outline: none !important;
        box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1) !important;
        transform: translateY(-1px) !important;
    }
    
    /* Hover states */
    input[type="text"]:hover, input[type="email"]:hover, input[type="tel"]:hover, 
    input[type="number"]:hover, input[type="datetime-local"]:hover, select:hover, textarea:hover {
        border-color: #d1d5db !important;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.04) !important;
    }
    
    /* Label styling */
    label {
        display: block !important;
        margin-bottom: 0.5rem !important;
        font-size: 0.875rem !important;
        font-weight: 600 !important;
        color: #374151 !important;
    }
    
    /* Select dropdown styling */
    select {
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e") !important;
        background-position: right 0.75rem center !important;
        background-repeat: no-repeat !important;
        background-size: 1.25rem !important;
        padding-right: 2.5rem !important;
        appearance: none !important;
    }
    
    /* Textarea specific styling */
    textarea {
        resize: vertical !important;
        min-height: 120px !important;
    }
    
    /* File input styling */
    input[type="file"] {
        padding: 0.75rem 1rem !important;
        border: 2px dashed #d1d5db !important;
        background: rgba(249, 250, 251, 0.8) !important;
        border-radius: 1rem !important;
        cursor: pointer !important;
    }
    
    input[type="file"]:hover {
        border-color: #10b981 !important;
        background: rgba(16, 185, 129, 0.05) !important;
    }
    
    /* Help text styling */
    .help-block, .text-muted, small {
        font-size: 0.75rem !important;
        color: #6b7280 !important;
        margin-top: 0.25rem !important;
    }
    
    /* Error styling */
    .has-error input, .has-error select, .has-error textarea {
        border-color: #ef4444 !important;
        background: rgba(254, 242, 242, 0.8) !important;
    }
    
    /* Section card styling */
    .form-section {
        background: rgba(255, 255, 255, 0.9) !important;
        backdrop-filter: blur(12px) !important;
        border: 1px solid rgba(255, 255, 255, 0.2) !important;
        border-radius: 1.5rem !important;
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04) !important;
        padding: 2rem !important;
        margin-bottom: 2rem !important;
    }
    
    /* Button styling */
    .btn-primary {
        background: linear-gradient(135deg, #10b981, #059669) !important;
        border: none !important;
        color: white !important;
        font-weight: 600 !important;
        padding: 1rem 2rem !important;
        border-radius: 1rem !important;
        transition: all 0.3s ease !important;
        box-shadow: 0 4px 14px 0 rgba(16, 185, 129, 0.3) !important;
    }
    
    .btn-primary:hover {
        transform: translateY(-2px) !important;
        box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4) !important;
    }
    
    /* Floating elements animation */
    .floating-shape {
        position: absolute;
        border-radius: 50%;
        background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(5, 150, 105, 0.2));
        animation: float 8s ease-in-out infinite;
    }
    
    @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-20px); }
    }
    
    /* Fade in animation */
    .animate-fade-in {
        animation: fadeIn 0.8s ease-in-out;
    }
    
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
    
    /* Enhanced card animations */
    .enhanced-card {
        animation: slideUp 0.6s ease-out forwards;
        opacity: 0;
        transform: translateY(30px);
    }
    
    .enhanced-card:nth-child(1) { animation-delay: 0.1s; }
    .enhanced-card:nth-child(2) { animation-delay: 0.2s; }
    .enhanced-card:nth-child(3) { animation-delay: 0.3s; }
    .enhanced-card:nth-child(4) { animation-delay: 0.4s; }
    .enhanced-card:nth-child(5) { animation-delay: 0.5s; }
    
    @keyframes slideUp {
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
        .floating-shape {
            display: none;
        }
        
        input[type="text"], input[type="email"], input[type="tel"], input[type="number"], 
        input[type="datetime-local"], select, textarea {
            font-size: 16px !important; /* Prevent zoom on iOS */
        }
        
        .form-section {
            padding: 1.5rem !important;
            margin-bottom: 1.5rem !important;
        }
        
        /* Additional form styling */
        textarea {
            transition: all 0.3s ease-in-out !important;
            resize: none !important;
            min-height: 120px !important;
        }
        
        .form-select {
            width: 100% !important;
            padding: 0.75rem 1rem !important;
            border: 2px solid #e5e7eb !important;
            border-radius: 0.75rem !important;
            background: rgba(255, 255, 255, 0.8) !important;
            backdrop-filter: blur(8px) !important;
            appearance: none !important;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 20px;
            transition: all 0.3s ease-in-out !important;
        }
        
        .form-select:focus {
            border-color: #10b981 !important;
            background: rgba(255, 255, 255, 1) !important;
            outline: none !important;
        }
        
        .form-file {
            width: 100% !important;
            padding: 0.75rem 1rem !important;
            border: 2px dashed #d1d5db !important;
            border-radius: 0.75rem !important;
            background: rgba(249, 250, 251, 0.8) !important;
            backdrop-filter: blur(8px) !important;
            cursor: pointer !important;
            transition: all 0.3s ease-in-out !important;
        }
        
        .form-file:hover {
            border-color: #3b82f6 !important;
            background: rgba(239, 246, 255, 0.8) !important;
        }
    
    /* Floating elements animation */
    .floating-element {
        animation: float 6s ease-in-out infinite;
    }
    
    .floating-element:nth-child(even) {
        animation-delay: -3s;
    }
    
    @keyframes float {
        0%, 100% { transform: translateY(0px) rotate(0deg); }
        33% { transform: translateY(-20px) rotate(1deg); }
        66% { transform: translateY(-10px) rotate(-1deg); }
    }
    
    /* Gradient animations */
    .gradient-animation {
        background-size: 400% 400%;
        animation: gradientShift 8s ease infinite;
    }
    
    @keyframes gradientShift {
        0%, 100% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
    }
    
        /* Enhanced button effects */
        .btn-primary {
            background: linear-gradient(to right, #2563eb, #1d4ed8) !important;
            color: white !important;
            font-weight: bold !important;
            padding: 1rem 2rem !important;
            border-radius: 0.75rem !important;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1) !important;
            transform: scale(1) !important;
            transition: all 0.3s ease-in-out !important;
        }
        
        .btn-primary:hover {
            background: linear-gradient(to right, #1d4ed8, #1e40af) !important;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1) !important;
            transform: scale(1.05) !important;
        }
        
        .btn-secondary {
            background: linear-gradient(to right, #f3f4f6, #e5e7eb) !important;
            color: #374151 !important;
            font-weight: bold !important;
            padding: 1rem 2rem !important;
            border-radius: 0.75rem !important;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1) !important;
            transform: scale(1) !important;
            transition: all 0.3s ease-in-out !important;
        }
        
        .btn-secondary:hover {
            background: linear-gradient(to right, #e5e7eb, #d1d5db) !important;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1) !important;
            transform: scale(1.05) !important;
        }
        
        /* Form section enhancements */
        .form-section {
            position: relative !important;
            overflow: hidden !important;
            background: rgba(255, 255, 255, 0.95) !important;
            backdrop-filter: blur(10px) !important;
            border-radius: 1.5rem !important;
            padding: 2rem !important;
            margin-bottom: 2rem !important;
            border: 1px solid rgba(229, 231, 235, 0.3) !important;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1) !important;
            transition: all 0.3s ease-in-out !important;
        }
        
        .form-section:hover {
            transform: translateY(-2px) !important;
            box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.15) !important;
        }
        
        .form-section::before {
            content: '';
            position: absolute !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: 100% !important;
            background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
            pointer-events: none;
        }
    
        /* Enhanced tooltips */
        .tooltip {
            position: relative !important;
        }
        
        .tooltip::after {
            position: absolute !important;
            bottom: 100% !important;
            left: 50% !important;
            transform: translateX(-50%) !important;
            margin-bottom: 0.5rem !important;
            background-color: #111827 !important;
            color: white !important;
            font-size: 0.75rem !important;
            padding: 0.5rem 0.75rem !important;
            border-radius: 0.5rem !important;
            opacity: 0 !important;
            pointer-events: none !important;
            transition: opacity 0.3s !important;
            content: attr(data-tooltip);
            white-space: nowrap;
            z-index: 1000;
        }
        
        .tooltip:hover::after {
            opacity: 1 !important;
        }
        
        /* Loading states */
        .loading {
            position: relative !important;
            overflow: hidden !important;
        }
        
        .loading::after {
            position: absolute !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: 100% !important;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: loading 1.5s infinite;
            content: '';
        }
    
    @keyframes loading {
        0% { transform: translateX(-100%); }
        100% { transform: translateX(100%); }
    }
    
        /* Mobile optimizations */
        @media (max-width: 768px) {
            .form-section {
                margin-left: 1rem !important;
                margin-right: 1rem !important;
                border-radius: 1rem !important;
            }
            
            .floating-element {
                display: none;
            }
            
            .hero-title {
                font-size: 2.25rem !important;
            }
            
            .hero-subtitle {
                font-size: 1.125rem !important;
            }
        }
    }
</style>
{% endblock %}

{% block content %}
    <!-- Enhanced Hero Section with app bar spacing -->
    <section class="relative pt-32 pb-20 bg-gradient-to-br from-cn-green-50 via-white to-blue-50 overflow-hidden">
        <!-- Floating decorative elements -->
        <div class="absolute top-10 -left-20 w-64 h-64 bg-gradient-to-br from-cn-green-200/30 to-cn-green-400/30 rounded-full blur-3xl animate-pulse"></div>
        <div class="absolute top-32 -right-16 w-48 h-48 bg-gradient-to-br from-blue-200/30 to-blue-400/30 rounded-full blur-3xl animate-pulse" style="animation-delay: -2s;"></div>
        <div class="absolute bottom-20 left-1/2 w-32 h-32 bg-gradient-to-br from-purple-200/30 to-purple-400/30 rounded-full blur-3xl animate-pulse" style="animation-delay: -4s;"></div>
        
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <!-- Enhanced Header -->
            <div class="text-center mb-12 animate-fade-in-up">
                <div class="inline-flex items-center bg-cn-green-100 text-cn-green-700 px-6 py-3 rounded-full text-sm font-bold mb-8 shadow-lg">
                    <i class="fas fa-rocket mr-3 text-lg"></i>
                    Launch Your Campaign
                </div>
                <h1 class="text-5xl md:text-6xl font-black text-cn-dark mb-8 leading-tight bg-gradient-to-r from-cn-dark via-cn-green-700 to-cn-dark bg-clip-text text-transparent">
                    Create Your Impact
                </h1>
                <p class="text-xl md:text-2xl text-cn-muted max-w-4xl mx-auto leading-relaxed font-medium">
                    Turn your cause into a powerful campaign that inspires action and creates meaningful change across Nepal.
                </p>
            </div>

            <!-- Enhanced Breadcrumb -->
            <div class="flex justify-center mb-16">
                <nav class="bg-white/80 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20 px-8 py-4">
                    <div class="flex items-center space-x-4 text-sm font-semibold">
                        <a href="{% url 'home' %}" class="text-cn-muted hover:text-cn-green-600 transition-colors duration-200 flex items-center">
                            <i class="fas fa-home mr-2"></i>
                            Home
                        </a>
                        <i class="fas fa-chevron-right text-cn-muted"></i>
                        <a href="{% url 'cases:list' %}" class="text-cn-muted hover:text-cn-green-600 transition-colors duration-200 flex items-center">
                            <i class="fas fa-heart mr-2"></i>
                            Campaigns
                        </a>
                        <i class="fas fa-chevron-right text-cn-muted"></i>
                        <span class="text-cn-green-600 flex items-center">
                            <i class="fas fa-plus mr-2"></i>
                            Create Campaign
                        </span>
                    </div>
                </nav>
            </div>
        </div>
    </section>

    <!-- Enhanced Form Section -->
    <section class="relative py-16 bg-gradient-to-b from-gray-50 to-white">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <!-- Main Form Card -->
            <div class="bg-white/90 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/20 overflow-hidden">
                <div class="p-8 md:p-12">
                    <form method="post" enctype="multipart/form-data" class="space-y-12" id="campaign-form">
                        {% csrf_token %}
                    
                        <!-- Enhanced Basic Information Section -->
                        <div class="form-section enhanced-card">
                            <div class="flex items-center mb-8">
                                <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-700 rounded-2xl flex items-center justify-center mr-4 shadow-lg">
                                    <i class="fas fa-edit text-white text-xl"></i>
                                </div>
                                <div>
                                    <h2 class="text-2xl font-black text-cn-dark">Basic Information</h2>
                                    <p class="text-cn-muted font-medium">Tell us about your campaign's core details</p>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                <div class="lg:col-span-2">
                                    <div class="form-group">
                                        <label class="block text-sm font-bold text-cn-dark mb-3">Campaign Title</label>
                                        {{ form.title }}
                                        <div class="text-xs text-cn-muted mt-2">
                                            <i class="fas fa-lightbulb mr-1"></i>
                                            Make it compelling and specific to attract donors
                                        </div>
                                    </div>
                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <div class="form-group">
                                            <label class="block text-sm font-bold text-cn-dark mb-3">Category</label>
                                            {{ form.category }}
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <div class="form-group">
                                            <label class="block text-sm font-bold text-cn-dark mb-3">Urgency Level</label>
                                            {{ form.urgency_flag }}
                                        </div>
                                    </div>
                                    
                                    <div class="lg:col-span-2">
                                        <div class="form-group">
                                            <label class="block text-sm font-bold text-cn-dark mb-3">Campaign Description</label>
                                            {{ form.description }}
                                            <div class="text-xs text-cn-muted mt-2">
                                                <i class="fas fa-info-circle mr-1"></i>
                                                Share the complete story - be detailed about the need and how funds will be used
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Enhanced Financial Details Section -->
                        <div class="form-section">
                            <div class="flex items-center mb-8">
                                    <div class="w-12 h-12 bg-gradient-to-br from-green-500 to-green-700 rounded-2xl flex items-center justify-center mr-4 shadow-lg">
                                        <i class="fas fa-coins text-white text-xl"></i>
                                    </div>
                                    <div>
                                        <h2 class="text-2xl font-black text-cn-dark">Financial Goal</h2>
                                        <p class="text-cn-muted font-medium">Set your fundraising target and timeline</p>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                    <div>
                                        <div class="form-group">
                                            <label class="block text-sm font-bold text-cn-dark mb-3">Target Amount (NPR)</label>
                                            {{ form.target_amount }}
                                            <div class="text-xs text-cn-muted mt-2 bg-green-100 p-3 rounded-xl">
                                                <i class="fas fa-chart-line mr-1 text-green-600"></i>
                                                Set a realistic and specific goal amount to increase donor confidence
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <div class="form-group">
                                            <label class="block text-sm font-bold text-cn-dark mb-3">Campaign Deadline</label>
                                            {{ form.deadline }}
                                            <div class="text-xs text-cn-muted mt-2 bg-yellow-100 p-3 rounded-xl">
                                                <i class="fas fa-clock mr-1 text-yellow-600"></i>
                                                Optional: Set a deadline to create urgency and encourage action
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Enhanced Location & Contact Section -->
                        <div class="form-section">
                            <div class="flex items-center mb-8">
                                <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-700 rounded-2xl flex items-center justify-center mr-4 shadow-lg">
                                        <i class="fas fa-map-marker-alt text-white text-xl"></i>
                                    </div>
                                    <div>
                                        <h2 class="text-2xl font-black text-cn-dark">Location & Contact</h2>
                                        <p class="text-cn-muted font-medium">Where is the campaign located and how to reach you</p>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                    <div>
                                        <div class="form-group">
                                            <label class="block text-sm font-bold text-cn-dark mb-3">Location</label>
                                            {{ form.location }}
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <div class="form-group">
                                            <label class="block text-sm font-bold text-cn-dark mb-3">Contact Phone</label>
                                            {{ form.contact_phone }}
                                        </div>
                                    </div>
                                    
                                    <div class="lg:col-span-2">
                                        <div class="form-group">
                                            <label class="block text-sm font-bold text-cn-dark mb-3">Contact Email</label>
                                            {{ form.contact_email }}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Enhanced Beneficiary Information Section -->
                        <div class="form-section">
                            <div class="flex items-center mb-8">
                                    <div class="w-12 h-12 bg-gradient-to-br from-orange-500 to-orange-700 rounded-2xl flex items-center justify-center mr-4 shadow-lg">
                                        <i class="fas fa-user-heart text-white text-xl"></i>
                                    </div>
                                    <div>
                                        <h2 class="text-2xl font-black text-cn-dark">Beneficiary Information</h2>
                                        <p class="text-cn-muted font-medium">Details about who will benefit from this campaign</p>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                    <div>
                                        <div class="form-group">
                                            <label class="block text-sm font-bold text-cn-dark mb-3">Beneficiary Name</label>
                                            {{ form.beneficiary_name }}
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <div class="form-group">
                                            <label class="block text-sm font-bold text-cn-dark mb-3">Beneficiary Age</label>
                                            {{ form.beneficiary_age }}
                                            <div class="text-xs text-cn-muted mt-2 bg-orange-100 p-3 rounded-xl">
                                                <i class="fas fa-info-circle mr-1 text-orange-600"></i>
                                                Optional: Age of the person who will benefit from the campaign
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Enhanced Media & Visibility Section -->
                        <!-- Enhanced Media & Details Section -->
                        <div class="form-section">
                            <div class="flex items-center mb-8">
                                    <div class="w-12 h-12 bg-gradient-to-br from-indigo-500 to-indigo-700 rounded-2xl flex items-center justify-center mr-4 shadow-lg">
                                        <i class="fas fa-camera text-white text-xl"></i>
                                    </div>
                                    <div>
                                        <h2 class="text-2xl font-black text-cn-dark">Media & Details</h2>
                                        <p class="text-cn-muted font-medium">Add images, documents, and tags to enhance your campaign</p>
                                    </div>
                                </div>
                                
                                <div class="space-y-8">
                                    <div>
                                        <div class="form-group">
                                            <label class="block text-sm font-bold text-cn-dark mb-3">Featured Image</label>
                                            {{ form.featured_image }}
                                            <div class="text-xs text-cn-muted mt-2 bg-indigo-100 p-4 rounded-xl">
                                                <i class="fas fa-camera mr-1 text-indigo-600"></i>
                                                <strong>Pro Tip:</strong> A compelling image can increase donations by up to 40%. Use high-quality photos that tell your story.
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <div class="form-group">
                                            <label class="block text-sm font-bold text-cn-dark mb-3">Supporting Documents</label>
                                            {{ form.documents }}
                                            <div class="text-xs text-cn-muted mt-2 bg-cyan-100 p-4 rounded-xl">
                                                <i class="fas fa-file-alt mr-1 text-cyan-600"></i>
                                                <strong>Optional:</strong> Upload supporting documents (medical reports, certificates, etc.) to build trust
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <div class="form-group">
                                            <label class="block text-sm font-bold text-cn-dark mb-3">Campaign Tags</label>
                                            {{ form.tags }}
                                            <div class="text-xs text-cn-muted mt-2 bg-purple-100 p-4 rounded-xl">
                                                <i class="fas fa-tags mr-1 text-purple-600"></i>
                                                <strong>SEO Tip:</strong> Use relevant tags separated by commas to help people find your campaign (e.g., medical, urgent, surgery)
                                            </div>
                                        </div>
                                    </div>
                                </div>
                        </div>

                        <!-- Enhanced Form Actions -->
                        <div class="form-section">
                            <div class="flex flex-col sm:flex-row gap-6">
                                <button type="submit" class="flex-1 bg-gradient-to-r from-cn-green-600 to-cn-green-700 text-white py-4 px-8 rounded-2xl font-bold text-lg hover:from-cn-green-700 hover:to-cn-green-800 transform hover:scale-105 transition-all duration-200 shadow-xl hover:shadow-2xl flex items-center justify-center group">
                                    <i class="fas fa-rocket mr-3 text-xl group-hover:animate-pulse"></i>
                                    Launch My Campaign
                                </button>
                                
                                <a href="{% url 'cases:list' %}" class="flex-1 bg-white border-2 border-gray-300 text-cn-dark py-4 px-8 rounded-2xl font-bold text-lg hover:bg-gray-50 hover:border-gray-400 transform hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl flex items-center justify-center group">
                                    <i class="fas fa-times mr-3 text-xl group-hover:rotate-90 transition-transform duration-200"></i>
                                    Cancel
                                </a>
                            </div>
                            
                            <div class="text-center mt-6">
                                <p class="text-sm text-cn-muted">
                                    <i class="fas fa-shield-alt mr-2 text-cn-green-600"></i>
                                    Your campaign will be reviewed before going live. We'll notify you once it's approved.
                                </p>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

        <!-- Tips Section -->
        <div class="mt-8">
            <div class="card bg-white shadow-lg">
                <div class="card-body">
                    <h3 class="card-title text-lg mb-4 flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                        </svg>
                        Tips for a Successful Campaign
                    </h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-sm text-slate-600">
                        <div class="space-y-3">
                            <div class="flex items-start space-x-2">
                                <div class="w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"></div>
                                <div>
                                    <strong>Clear Title:</strong> Write a compelling and specific title that explains what you're raising funds for
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-2">
                                <div class="w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"></div>
                                <div>
                                    <strong>Detailed Description:</strong> Tell your story with emotion and specific details about how funds will be used
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-2">
                                <div class="w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"></div>
                                <div>
                                    <strong>High-Quality Image:</strong> Use a clear, high-resolution image that represents your cause
                                </div>
                            </div>
                        </div>
                        
                        <div class="space-y-3">
                            <div class="flex items-start space-x-2">
                                <div class="w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"></div>
                                <div>
                                    <strong>Realistic Goal:</strong> Set a specific, achievable target amount based on actual needs
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-2">
                                <div class="w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"></div>
                                <div>
                                    <strong>Share Regularly:</strong> Promote your campaign on social media and with friends and family
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-2">
                                <div class="w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"></div>
                                <div>
                                    <strong>Post Updates:</strong> Keep donors engaged with regular updates on your progress
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Enhanced form field interactions
        const formFields = document.querySelectorAll('.form-input, .form-textarea, .form-select');
        
        formFields.forEach(field => {
            const label = field.previousElementSibling;
            
            // Focus effects
            field.addEventListener('focus', function() {
                this.parentElement.classList.add('field-focused');
                if (label && label.classList.contains('form-label')) {
                    label.style.color = '#3B82F6';
                    label.style.transform = 'scale(0.85)';
                }
            });
            
            // Blur effects
            field.addEventListener('blur', function() {
                this.parentElement.classList.remove('field-focused');
                if (label && label.classList.contains('form-label')) {
                    label.style.color = '#374151';
                    label.style.transform = 'scale(1)';
                }
            });
            
            // Input validation
            field.addEventListener('input', function() {
                if (this.value) {
                    this.classList.remove('border-red-300');
                    this.classList.add('border-green-300');
                } else {
                    this.classList.remove('border-green-300', 'border-red-300');
                }
            });
        });
        
        // Auto-resize textarea with enhanced animation
        const textarea = document.querySelector('textarea[name="description"]');
        if (textarea) {
            textarea.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = this.scrollHeight + 'px';
                this.style.transition = 'height 0.3s ease';
            });
        }
        
        // Enhanced file upload handling
        const fileInputs = document.querySelectorAll('input[type="file"]');
        fileInputs.forEach(input => {
            input.addEventListener('change', function() {
                const label = this.nextElementSibling || this.parentElement.querySelector('label');
                if (this.files.length > 0) {
                    const fileName = this.files[0].name;
                    if (label) {
                        label.textContent = `Selected: ${fileName}`;
                        label.classList.add('text-green-600', 'font-semibold');
                    }
                    
                    // Preview image if it's an image file
                    if (this.files[0].type.startsWith('image/')) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            let preview = document.getElementById('image-preview');
                            if (!preview) {
                                preview = document.createElement('div');
                                preview.id = 'image-preview';
                                preview.className = 'mt-4';
                                input.parentElement.appendChild(preview);
                            }
                            preview.innerHTML = `
                                <div class="relative inline-block">
                                    <img src="${e.target.result}" alt="Preview" class="h-32 w-32 object-cover rounded-xl shadow-lg">
                                    <button type="button" onclick="removePreview()" class="absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600 transition-colors">
                                        Ã—
                                    </button>
                                </div>
                            `;
                        };
                        reader.readAsDataURL(this.files[0]);
                    }
                }
            });
        });
        
        // Enhanced form validation with animations
        const form = document.querySelector('form');
        if (form) {
            form.addEventListener('submit', function(e) {
                let hasErrors = false;
                
                // Clear previous errors
                document.querySelectorAll('.error-message').forEach(el => el.remove());
                document.querySelectorAll('.border-red-300').forEach(el => {
                    el.classList.remove('border-red-300');
                });
                
                // Validate required fields
                const requiredFields = form.querySelectorAll('[required]');
                requiredFields.forEach(field => {
                    if (!field.value.trim()) {
                        hasErrors = true;
                        field.classList.add('border-red-300');
                        
                        // Add error message
                        const errorDiv = document.createElement('div');
                        errorDiv.className = 'error-message text-red-500 text-sm mt-1 animate-pulse';
                        errorDiv.textContent = 'This field is required';
                        field.parentElement.appendChild(errorDiv);
                        
                        // Shake animation
                        field.style.animation = 'shake 0.5s ease-in-out';
                        setTimeout(() => {
                            field.style.animation = '';
                        }, 500);
                    }
                });
                
                // Validate target amount
                const targetAmount = document.querySelector('input[name="target_amount"]');
                if (targetAmount && targetAmount.value) {
                    const amount = parseFloat(targetAmount.value);
                    if (amount < 1000) {
                        if (!confirm('Your target amount is quite low. Are you sure this is correct?')) {
                            e.preventDefault();
                            return;
                        }
                    }
                    if (amount > 10000000) {
                        hasErrors = true;
                        targetAmount.classList.add('border-red-300');
                        const errorDiv = document.createElement('div');
                        errorDiv.className = 'error-message text-red-500 text-sm mt-1';
                        errorDiv.textContent = 'Target amount seems unusually high. Please verify.';
                        targetAmount.parentElement.appendChild(errorDiv);
                    }
                }
                
                // Validate email format
                const emailField = document.querySelector('input[type="email"]');
                if (emailField && emailField.value) {
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (!emailRegex.test(emailField.value)) {
                        hasErrors = true;
                        emailField.classList.add('border-red-300');
                        const errorDiv = document.createElement('div');
                        errorDiv.className = 'error-message text-red-500 text-sm mt-1';
                        errorDiv.textContent = 'Please enter a valid email address';
                        emailField.parentElement.appendChild(errorDiv);
                    }
                }
                
                if (hasErrors) {
                    e.preventDefault();
                    // Scroll to first error
                    const firstError = document.querySelector('.border-red-300');
                    if (firstError) {
                        firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        firstError.focus();
                    }
                    return;
                }
                
                // Show loading state
                const submitButton = form.querySelector('button[type="submit"]');
                if (submitButton) {
                    submitButton.innerHTML = `
                        <i class="fas fa-spinner fa-spin mr-2"></i>
                        Creating Campaign...
                    `;
                    submitButton.disabled = true;
                    submitButton.classList.add('loading');
                }
            });
        }
        
        // Character counter for description
        const descriptionField = document.querySelector('textarea[name="description"]');
        if (descriptionField) {
            const counter = document.createElement('div');
            counter.className = 'text-sm text-gray-500 mt-1 text-right';
            descriptionField.parentElement.appendChild(counter);
            
            function updateCounter() {
                const length = descriptionField.value.length;
                const maxLength = 2000; // Suggested max
                counter.textContent = `${length} characters`;
                
                if (length > maxLength * 0.9) {
                    counter.classList.add('text-orange-500');
                }
                if (length > maxLength) {
                    counter.classList.remove('text-orange-500');
                    counter.classList.add('text-red-500');
                }
                if (length <= maxLength * 0.9) {
                    counter.classList.remove('text-orange-500', 'text-red-500');
                }
            }
            
            descriptionField.addEventListener('input', updateCounter);
            updateCounter();
        }
        
        // Smooth scroll for form sections
        const sectionLinks = document.querySelectorAll('a[href^="#"]');
        sectionLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });
        
        // Auto-save draft functionality
        let autoSaveTimer;
        const formElements = document.querySelectorAll('input, textarea, select');
        
        function saveDraft() {
            const formData = new FormData(form);
            const draftData = {};
            for (let [key, value] of formData.entries()) {
                if (value.trim()) draftData[key] = value;
            }
            localStorage.setItem('campaign_draft', JSON.stringify(draftData));
            
            // Show save indicator
            showNotification('Draft saved automatically', 'success', 2000);
        }
        
        function loadDraft() {
            const draftData = localStorage.getItem('campaign_draft');
            if (draftData) {
                const data = JSON.parse(draftData);
                Object.keys(data).forEach(key => {
                    const field = document.querySelector(`[name="${key}"]`);
                    if (field && !field.value) {
                        field.value = data[key];
                        field.dispatchEvent(new Event('input'));
                    }
                });
                showNotification('Draft loaded', 'info', 3000);
            }
        }
        
        formElements.forEach(element => {
            element.addEventListener('input', function() {
                clearTimeout(autoSaveTimer);
                autoSaveTimer = setTimeout(saveDraft, 2000);
            });
        });
        
        // Load draft on page load
        loadDraft();
    });
    
    // Utility functions
    function removePreview() {
        const preview = document.getElementById('image-preview');
        if (preview) {
            preview.remove();
        }
    }
    
    function showNotification(message, type = 'info', duration = 3000) {
        const notification = document.createElement('div');
        notification.className = `fixed top-4 right-4 z-50 px-6 py-3 rounded-xl shadow-lg transform transition-all duration-300 translate-x-full`;
        
        switch(type) {
            case 'success':
                notification.classList.add('bg-green-500', 'text-white');
                break;
            case 'error':
                notification.classList.add('bg-red-500', 'text-white');
                break;
            case 'warning':
                notification.classList.add('bg-yellow-500', 'text-white');
                break;
            default:
                notification.classList.add('bg-blue-500', 'text-white');
        }
        
        notification.textContent = message;
        document.body.appendChild(notification);
        
        // Animate in
        setTimeout(() => {
            notification.classList.remove('translate-x-full');
        }, 100);
        
        // Animate out
        setTimeout(() => {
            notification.classList.add('translate-x-full');
            setTimeout(() => {
                document.body.removeChild(notification);
            }, 300);
        }, duration);
    }
    
    // CSS for shake animation
    const shakeCSS = `
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
    `;
    const styleSheet = document.createElement('style');
    styleSheet.textContent = shakeCSS;
    document.head.appendChild(styleSheet);
</script>
{% endblock %}
